CREATE TABLE users (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  email TEXT UNIQUE,
  password_hash TEXT,
  created_at TIMESTAMP DEFAULT now()
);

CREATE TABLE stores (
  id SERIAL PRIMARY KEY,
  name TEXT,
  address TEXT,
  city TEXT,
  zipcode TEXT,
  source_type TEXT,
  last_checked TIMESTAMP
);

CREATE TABLE products (
  id SERIAL PRIMARY KEY,
  canonical_name TEXT,
  brand TEXT,
  size TEXT,
  unit TEXT,
  normalized_name TEXT
);

CREATE TABLE prices (
  id SERIAL PRIMARY KEY,
  product_id INT REFERENCES products(id),
  store_id INT REFERENCES stores(id),
  price_cents INT,
  unit_price NUMERIC,
  last_updated TIMESTAMP DEFAULT now()
);